sequenceDiagram
    participant DS as Data Sources
    participant Kafka as Kafka Stream
    participant SP as Stream Processor
    participant NLP as NLP Engine
    participant GDB as Graph Database
    participant GNN as Graph Neural Net
    participant Cache as Vector Cache
    participant Analyst as AI Analyst

    Note over DS,Analyst: Real-Time Context Graph Update Flow

    DS->>Kafka: New event (NVDA announces new AI chip)
    Kafka->>SP: Stream event

    SP->>NLP: Extract entities and intent
    NLP-->>SP: Entities: NVDA, AI Chip, Market

    SP->>GDB: Update relationships
    GDB-->>SP: Graph mutation complete

    GDB->>GNN: Trigger neighborhood embedding
    GNN-->>Cache: Store updated vectors

    Cache-->>GDB: Sync embeddings

    Cache->>Analyst: Context updated (47 entities affected)

    Note over Analyst: Query - How does NVDA announcement affect AI stocks?

    Analyst->>GDB: Query enriched context
    GDB-->>Analyst: Return augmented data and scenarios

    Analyst->>Analyst: Generate investment thesis

    Note over DS,Analyst: Total latency approx 500ms to 2s
